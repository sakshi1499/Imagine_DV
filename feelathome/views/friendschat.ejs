<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>ChatBox</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link class="favic" rel="icon" href="favicon.png" sizes="64x64"/>

<!-- <base href="http://localhost:3000/" target="_blank" > -->
<base href="https://doritos.herokuapp.com/"/>


<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<!-- bootstrap js -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="css/chatbox1.css">
  <link rel="stylesheet" href="css/emojipicker.css">


  </head>
  <body>


    <h6 value="<%= username %>" id="username" style="display:none;">
    </h6>



    <span class="top"></span>
    <div class="container-fluid bg-white chatbox shadow-lg rounded" style="position:absolute;bottom:50px !important; left:30px; right:auto; top:30px;  ">
      <div class="row h-100">
        <div class="col-md-4 pr-0 d-none d-md-block" id="side-1">
        <div class="card">
          <div class="card-header">
            <div class="row">

              <div class="col-10 col-sm-10 col-md-10" tyle="cursor:pointer; position:absolute;left:-50px;">

                <div class="name" style="margin-left:18px; color:#997381; font-weight: bold;padding:8px;">
                  <i class="fa fa-users" aria-hidden="true"></i>

  Companions

                </div>
                </div>
            <div class="col-2 col-sm-2 col-md-2 ">
                   <i class="fas fa-arrow-left pcl d-md-none" onclick="hideChatList()"></i>
                </div>
            </div>
          </div>





  <div id="sidebar" class="chat__sidebar">

          </div>


          <script id="sidebar-template" type="text/html">
            <div id="sidebar" class="">

             </div>


             <% if(userId){ %>

  <ul class="list-group list-group-flush">
    <h6 id="room"  value="{{room}}" style="height:0px;display:none;">{{room}}</h6>


<%#
    <li class="list-group-item list-group-item-action">
          <div class="row">
            <div class="col-md-2">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSdyBneVYUV2KFq5S1RdLlrPJzx2bvtbBEo9E4UN22sv-DcHfxz&s" class="friend-pic" alt="">

            </div>
            <div class="col-md-10" style="cursor:pointer; position:absolute;left:70px;">
    <div class="name">
    {{user}}
    </div>
    <div class="under-name">
    Online
    </div>

        </li> %>












        {{#friends}}
        <li class="list-group-item list-group-item-action">
              <div class="row">
                <div class="col-md-2">
        <img src="img/{{image}}" class="friend-pic" alt="">

                </div>
                <div class="col-md-10" style="cursor:pointer; position:absolute;left:70px;">
        <div class="name">
        {{username}}
        </div>
        <div class="{{username}}online under-name">
        </div>


        <a href="" style="z-index:1">
        <i  value="{{username}}"  style="color:#997381" class="notify{{username}} fas fa-user-plus ">
        <span class="notificationmessage" style="font-family:sans-serif; font-size:12px;"></span>
        </i>
        </a>





                </div>
              </div>
            </li>



        {{/friends}}




{{#activefriends}}
<li class="list-group-item list-group-item-action">
      <div class="row">
        <div class="col-md-2">
<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSdyBneVYUV2KFq5S1RdLlrPJzx2bvtbBEo9E4UN22sv-DcHfxz&s" class="friend-pic" alt="">

        </div>
        <div class="col-md-10" style="cursor:pointer; position:absolute;left:70px;">
<div class="name">
{{friend}}
</div>
<div class="under-name">
Online
</div>








        </div>
      </div>
    </li>



{{/activefriends}}




  </ul>


  <% } %>


</script>







</div>
</div>




        <div class="col-md-8 pl-0" id="side-2">
<div class="card" id="chatPanel" style="display:none;">
  <div class="card-header">
<div class="row">


<div class="col-5   col-lg-7" style="color:#997381" >
  <div class="name">
<h6 style="color:#997381;font-weight:bold;">
  Doritos

</h6>
  </div>
  <div class="under-name">
    <i class="fa fa-handshake" style="margin-left:20px;" aria-hidden="true"></i>
  </div>
</div>

<div class=" icon" style="position:absolute; right:2rem;">
  <i class="fas fa-trash "></i>
</div>

</div>
  </div>

  <% if(userId) { %>

  <div class="card-body" id="messages1" style="opacity:0.9">




      <div id="messages" class="chat__messages"></div>


      <script id="message-template" type="text/html">

{{#check}}
<div class="row">


  <div class="col-2 col-sm-1 col-md-1" >
<img src="img/<%= image %>" class="chat-pic" alt="">
  </div>
  <div class="col-6 col-sm-7 col-md-7">
<p class="receive" style="color:#FAEBD7" >{{message}}
<span class="time">{{createdAt}}</span>
</p>
  </div>
</div>
{{/check}}

{{#friend}}
<div class="row justify-content-end">
  <div class="col-6 col-sm-7 col-md-7">

    <p class="sent float-right" style="color:#997381" >
{{message}}
    <span class="time" style="color:black">{{createdAt}}</span>
    </p>
    <p class="sent float-right" style="color:grey" >
      {{username}}
</p>
  </div>
  <div class="col-2 col-sm-1 col-md-1">
<img src="img/{{image}}" class="chat-pic" alt="">
  </div>

</div>

{{/friend}}




</script>




<script id="location-message-template" type="text/html">

{{#check}}
<div class="row" >
<div class="col-2 col-sm-1 col-md-1" >
<img src="img/<%= image %>" class="chat-pic" alt="">
</div>
<div class="col-6 col-sm-7 col-md-7">
<p class="receive" >
  <a  href="{{url}}" style="color:#FAEBD7; font-weight: bold;cursor:pointer; ">
    My Current Location

  </a>

<span class="time">{{createdAt}}</span>
</p>
</div>


{{/check}}
{{#friend}}
<div class="row justify-content-end">
  <div class="col-6 col-sm-7 col-md-7">
    <p class="sent float-right" >
      <a  href="{{url}}" style="color:#997381; cursor:pointer; font-weight: bold;">
        My Current Location

      </a>
    <span class="time">{{createdAt}}</span>
    </p>
    <p class="sent float-right" style="color:grey" >
      {{username}}
  </p>
  </div>
  <div class="col-2 col-sm-1 col-md-1">
<img src="img/{{image}}" class="chat-pic" alt="">
  </div>

</div>

{{/friend}}

  <div id="sidebar" class="chat__sidebar">        </div>
      <div id="messages" class="chat__messages"></div>
</div>



</script>





  </div>


  <div class="chat">

    <div class="chat__main">
      <div id="sidebar" class="chat__sidebar">

    </div>
            <div id="messages" class="chat__messages"></div>
<form id="message-form" style="">


  <div class="card-footer">
<div class="row">
  <div class="col-2 col-md-1">
<%- include('./emojipicker') -%>

  </div>
  <div class="col-8 col-md-9">
<input autocomplete="off" type="text"  id="txtMessage" name="message"  placeholder="Type Here" class=" input-field form-control form-rounded">
  </div>




      <button  class="btn " style="position:relative; top:-5px; right:5px;color:#997381">
        <a href="#">
    <i style="visibility:hidden"  class="fas fa-2x iconch fa-paper-plane"></i>
    </a>
    </button>

    <button id="send-location" class="btn " style="position:absolute;bottom:18px;right:40px; color:#997381">



<i class="fa fa-map-marker-alt fa-2x iconch"></i>
</button>




</div>
  </div>


    </form>

  </div>







</div>

<% } %>

<h1 class="userId" value="<%= userId %>" style="display:none"></h1>

<% if(!userId) { %>
  <div id="divStart" class="text-center">
  <i class="fas fa-comments mt-5 pcl" style="font-size:150px; "></i>
  <h2 class="mt-3 pcl">Start Chatting!</h2>
  <a href="#"  class="d-md-none" style="font-weight: bolder; color: #501B1D;">New Chat</a>
  <a href="/login" class="btn pcl">Sign In</a>
  </div>
          </div>

        </div>
      </div>

<% }%>

  </body>
  <!-- The core Firebase JS SDK is always required and must be listed first -->

      <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.0.1/mustache.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.6.0/qs.min.js"></script>



      <script
          src="https://code.jquery.com/jquery-3.2.1.min.js"
          integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
          crossorigin="anonymous">
        </script>


  <script src="/socket.io/socket.io.js"></script>
  <script src="js/friendschat.js" charset="utf-8"></script>
<script type="text/javascript" src="js/chatbox.js"></script>

<script type="text/javascript" src="js/emojipicker.js"></script>


</html>
